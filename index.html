<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>三重和氣三、四新春健走報名表</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #fff5f7 0%, #fce4ec 100%);
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        /* 櫻花背景飄落 */
        #petal-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .petal {
            position: absolute;
            background-color: #ffc0cb;
            border-radius: 150% 0 150% 0;
            opacity: 0.3;
            pointer-events: none;
            animation: fall linear infinite;
        }

        @keyframes fall {
            0% { transform: translateY(-10vh) translateX(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            100% { transform: translateY(110vh) translateX(120px) rotate(720deg); opacity: 0; }
        }

        .form-card {
            box-shadow: 0 40px 100px -20px rgba(255, 182, 193, 0.4);
            backdrop-filter: blur(10px);
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .hero-gradient {
            background: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.5) 100%);
        }

        .input-focus-ring:focus {
            box-shadow: 0 0 0 4px rgba(244, 114, 182, 0.2);
        }

        .success-animation {
            animation: bounceIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
        }

        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.3); }
            50% { opacity: 1; transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
    <script>
        let isSubmitting = false;

        function handleSubmit() {
            isSubmitting = true;
            const btn = document.getElementById('submit-btn');
            if (btn) {
                btn.disabled = true;
                btn.innerHTML = '<i data-lucide="loader-2" class="w-5 h-5 mr-2 animate-spin"></i> 報名傳送中...';
                if (window.lucide) lucide.createIcons();
            }
            return true;
        }

        function handleIframeLoad() {
            if (isSubmitting) {
                const formContent = document.getElementById('form-content');
                const successMsg = document.getElementById('success-message');
                const infoBox = document.getElementById('info-box');
                const heroSection = document.getElementById('hero-section');

                if (heroSection) heroSection.classList.add('h-48');
                if (infoBox) infoBox.classList.add('hidden');
                if (formContent) formContent.classList.add('hidden');
                if (successMsg) successMsg.classList.remove('hidden');
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function createPetals() {
            const container = document.getElementById('petal-container');
            if (!container) return;
            for (let i = 0; i < 25; i++) {
                const petal = document.createElement('div');
                petal.className = 'petal';
                const size = Math.random() * 10 + 10 + 'px';
                petal.style.width = size;
                petal.style.height = size;
                petal.style.left = Math.random() * 100 + 'vw';
                petal.style.animationDuration = Math.random() * 8 + 7 + 's';
                petal.style.animationDelay = Math.random() * 10 + 's';
                container.appendChild(petal);
            }
        }
    </script>
</head>
<body class="min-h-screen py-6 px-4 sm:py-12 sm:px-6 lg:px-8 relative overflow-x-hidden">

    <div id="petal-container"></div>

    <div class="max-w-xl mx-auto relative z-10">
        <div id="registration-card" class="bg-white/95 rounded-[3rem] overflow-hidden form-card border border-white/50 shadow-2xl relative z-20">
            
            <div id="hero-section" class="relative h-64 sm:h-80 overflow-hidden transition-all duration-700 ease-in-out">
                <img src="https://images.unsplash.com/photo-1522748906645-95d8adfd52c7?q=80&w=1200&auto=format&fit=crop" 
                     alt="[新春櫻花公園]" 
                     class="w-full h-full object-cover">
                <div class="absolute inset-0 hero-gradient"></div>
                <div class="absolute bottom-8 left-0 right-0 text-center text-white px-6">
                    <h1 class="text-2xl sm:text-3xl font-bold tracking-tight drop-shadow-lg mb-2">三重和氣三、四新春健走</h1>
                    <div class="flex items-center justify-center space-x-3">
                        <div class="h-[1px] w-6 bg-white/40"></div>
                        <div class="bg-white/20 backdrop-blur-md px-4 py-1.5 rounded-full border border-white/30 text-xs sm:text-sm font-medium tracking-widest uppercase">
                             拼感情 ‧ 健走邀約
                        </div>
                        <div class="h-[1px] w-6 bg-white/40"></div>
                    </div>
                </div>
            </div>

            <div id="info-box" class="px-8 py-6 glass-effect border-b border-pink-100">
                <div class="space-y-4">
                    <div class="flex items-center space-x-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-pink-100 rounded-2xl flex items-center justify-center text-pink-600">
                            <i data-lucide="calendar" class="w-5 h-5"></i>
                        </div>
                        <div>
                            <p class="text-xs text-pink-400 font-bold uppercase tracking-tighter">Event Time</p>
                            <p class="text-gray-700 font-medium">3月28日（六）05:30 – 08:30</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-pink-100 rounded-2xl flex items-center justify-center text-pink-600">
                            <i data-lucide="map-pin" class="w-5 h-5"></i>
                        </div>
                        <div>
                            <p class="text-xs text-pink-400 font-bold uppercase tracking-tighter">Location</p>
                            <p class="text-gray-700 font-medium">二重疏洪道（新北都會公園）</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="form-content" class="p-8 sm:p-10">
                <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;" onload="handleIframeLoad()"></iframe>
                
                <form 
                    action="https://docs.google.com/forms/u/0/d/e/1FAIpQLScfeJOFXTHRJ8AEYnpIip8hcsclJ3lGVuhB1dgd2aYq07-89A/formResponse" 
                    method="POST" 
                    target="hidden_iframe"
                    onsubmit="return handleSubmit()"
                    class="space-y-6"
                >
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label class="text-sm font-bold text-gray-500 ml-1">所屬和氣 *</label>
                            <select name="entry.2066300681" required class="w-full px-5 py-4 bg-gray-50 border-2 border-gray-50 rounded-2xl outline-none focus:border-pink-300 focus:bg-white transition-all input-focus-ring">
                                <option value="" selected disabled>請選擇</option>
                                <option value="和氣3">和氣3</option>
                                <option value="和氣4">和氣4</option>
                            </select>
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-bold text-gray-500 ml-1">所屬互愛 *</label>
                            <select name="entry.1646258153" required class="w-full px-5 py-4 bg-gray-50 border-2 border-gray-50 rounded-2xl outline-none focus:border-pink-300 focus:bg-white transition-all input-focus-ring">
                                <option value="" selected disabled>請選擇</option>
                                <option value="互愛1">互愛1</option>
                                <option value="互愛2">互愛2</option>
                            </select>
                        </div>
                    </div>

                    <div class="space-y-2">
                        <label class="text-sm font-bold text-gray-500 ml-1">所屬協力 *</label>
                        <select name="entry.983147328" required class="w-full px-5 py-4 bg-gray-50 border-2 border-gray-50 rounded-2xl outline-none focus:border-pink-300 focus:bg-white transition-all input-focus-ring">
                            <option value="" selected disabled>請選擇</option>
                            <option value="協力1">協力1</option>
                            <option value="協力2">協力2</option>
                        </select>
                    </div>

                    <div class="space-y-2">
                        <label class="text-sm font-bold text-gray-500 ml-1">報名姓名 *</label>
                        <input type="text" name="entry.2781799" placeholder="請填寫姓名" required 
                            class="w-full px-5 py-4 bg-gray-50 border-2 border-gray-50 rounded-2xl outline-none focus:border-pink-300 focus:bg-white transition-all input-focus-ring">
                    </div>

                    <div class="space-y-2">
                        <label class="text-sm font-bold text-gray-500 ml-1">聯絡電話 *</label>
                        <input type="tel" name="entry.764713427" placeholder="手機或市話" required 
                            class="w-full px-5 py-4 bg-gray-50 border-2 border-gray-50 rounded-2xl outline-none focus:border-pink-300 focus:bg-white transition-all input-focus-ring">
                    </div>

                    <div class="space-y-2">
                        <label class="text-sm font-bold text-gray-500 ml-1">參加總人數 *</label>
                        <input type="number" name="entry.366303649" min="1" max="10" value="1" required 
                            class="w-full px-5 py-4 bg-gray-50 border-2 border-gray-50 rounded-2xl outline-none focus:border-pink-300 focus:bg-white transition-all input-focus-ring">
                    </div>

                    <button type="submit" id="submit-btn" class="w-full py-5 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white font-bold text-xl rounded-[2rem] shadow-2xl shadow-pink-200 transition-all active:scale-[0.97] mt-6 flex items-center justify-center group">
                        <span>提交報名資料</span>
                        <i data-lucide="arrow-right" class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"></i>
                    </button>
                </form>
            </div>

            <div id="success-message" class="hidden p-16 text-center success-animation">
                <div class="relative inline-block mb-8">
                    <div class="w-24 h-24 bg-gradient-to-tr from-pink-500 to-rose-400 text-white rounded-full flex items-center justify-center shadow-2xl relative z-10">
                        <i data-lucide="check" size="48"></i>
                    </div>
                </div>
                <h2 class="text-3xl font-bold text-gray-800 mb-4">報名成功！</h2>
                <p class="text-gray-500 text-lg mb-10 leading-relaxed">
                    期待 3月28日 與您相見！
                </p>
                <button onclick="location.reload()" class="px-8 py-3 rounded-full border-2 border-pink-200 text-pink-400 hover:bg-pink-50 transition-colors font-bold">
                    返回報名頁面
                </button>
            </div>
        </div>

        <div class="text-center mt-12 pb-12">
            <p class="text-pink-300 text-sm font-medium mb-1">三重和氣三、四 志工團隊 敬邀</p>
        </div>
    </div>

    <script>
        window.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            createPetals();
        });
    </script>
</body>
</html>
